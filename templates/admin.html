<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>HERSET ç®¡ç†å¾Œå°</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <h1>HERSET ç®¡ç†å¾Œå°</h1>
    <nav>
      <a href="/admin">å•†å“ç®¡ç†</a>
      <a href="/admin?tab=members">æœƒå“¡ç³»çµ±ç®¡ç†</a>
      <a href="/admin?tab=orders">è¨‚å–®ç®¡ç†ç³»çµ±</a>
    </nav>
  </header>

  <main>
    <!-- å•†å“åˆ—è¡¨ -->
    {% if products %}
    <section>
      <h2>å•†å“ç®¡ç†</h2>
      <a href="/admin/new" class="add-btn">ï¼‹æ–°å¢å•†å“</a>
      <ul>
        {% for p in products %}
        <li>
          {{ p.name }} - ${{ p.price }}
          <a href="/edit/{{ p.id }}">ç·¨è¼¯</a>
          <form action="/delete/{{ p.id }}" method="post" style="display:inline;">
            <button type="submit">åˆªé™¤</button>
          </form>
        </li>
        {% endfor %}
      </ul>
    </section>
    {% endif %}

    <!-- æœƒå“¡åˆ—è¡¨ -->
    {% if members %}
    <section>
      <h2>æœƒå“¡ç³»çµ±ç®¡ç†</h2>
      <form method="get" action="/admin/members">
        <input type="text" name="keyword" placeholder="è¼¸å…¥å¸³è™Ÿã€å§“åã€é›»è©±æˆ–Email">
        <button type="submit">æœå°‹</button>
      </form>
      <ul>
        {% for m in members %}
        <li>
          <strong>{{ m.username }}</strong> ({{ m.account }})<br>
          é›»è©±ï¼š{{ m.phone or 'â€”' }}ã€Emailï¼š{{ m.email or 'â€”' }}
        </li>
        {% endfor %}
      </ul>
    </section>
    {% endif %}

    <!-- è¨‚å–®åˆ—è¡¨ -->
    {% if orders %}
    <section>
      <h2>è¨‚å–®ç®¡ç†ç³»çµ±</h2>
      {% for o in orders %}
      <div class="order-row">
        <strong>è¨‚å–®ç·¨è™Ÿï¼š</strong>#{{ o.id }}<br>
        <strong>è³¼è²·å•†å“ï¼š</strong>
        <ul>
          {% for item in o.items %}
          <li>{{ item.product_name }} x {{ item.qty }} (${{ item.price }})</li>
          {% endfor %}
        </ul>
        <strong>è¨‚å–®é‡‘é¡ï¼š</strong>${{ o.total_amount }}<br>
        <strong>æœƒå“¡å¸³è™Ÿï¼š</strong>{{ o.member.account }}<br>
        <strong>è³¼è²·äººï¼š</strong>{{ o.member.name }}<br>
        <strong>é›»è©±ï¼š</strong>{{ o.member.phone }}<br>
        <strong>åœ°å€ï¼š</strong>{{ o.member.address }}<br>
        <strong>ç›®å‰ç‹€æ…‹ï¼š</strong>{{ o.status }}<br>
        <form action="/admin/orders/update_status/{{ o.id }}" method="post">
          <label>ä¿®æ”¹ç‹€æ…‹ï¼š
            <select name="status">
              <option value="pending" {% if o.status == 'pending' %}selected{% endif %}>å¾…è™•ç†</option>
              <option value="paid" {% if o.status == 'paid' %}selected{% endif %}>å·²ä»˜æ¬¾</option>
              <option value="shipped" {% if o.status == 'shipped' %}selected{% endif %}>å·²å‡ºè²¨</option>
            </select>
          </label>
          <button type="submit">æ›´æ–°</button>
        </form>
        <form action="/admin/orders/delete/{{ o.id }}" method="post">
          <button type="submit">ğŸ—‘ åˆªé™¤</button>
        </form>
      </div>
      {% endfor %}
    </section>
    {% endif %}
  </main>

  <footer>
    <p>Â© 2025 HERSET ç®¡ç†ç³»çµ±</p>
  </footer>
</body>
</html>
